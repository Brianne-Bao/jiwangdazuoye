<!--pages/classTable/classTable.wxml-->
<text>pages/classTable/classTable.wxml</text>
<view class="content">
    <!-- 选择周数部分 -->
    <view class='title'>
        <button size="mini" bindtap="lastWeek">{{'<'}} 上一周 </button>
                <text>第7周</text>
                <button size="mini" bindtap="nextWeek">下一周 {{'>'}} </button>
                <image style=' height: 100rpx;width: 100rpx;' src='/images/classTable/allcourse.jpg' bindtap="allCourse"></image>
    </view>


    <!-- 表格框架部分  -->
    <view class="top">
        <view class='left'>节\周</view>
        <view wx:for="{{['一','二','三','四','五']}}" wx:key="index" class="top-text">
            {{item}}
        </view>
    </view>
    <scroll-view scroll-y="true" class="scroll" style='height:{{windowHeight-110}}px;' bindtap='clickHide'>
        <view style="width:100%;display:flex;">
            <view style="background-color:#EFEFF4;color:#333;">
                <view wx:for="{{[1,2,3,4,5,6,7,8,9,10,11,12]}}" wx:key="index" class="left" style='height:50px'>
                    {{item}}
                </view>
            </view>
            <view wx:for="{{[1,2,3,4,5,6,7,8,9,10,11,12]}}" wx:key="index">
                <view style="width:100%;margin-top:{{(index+1)*50-0.8}}px;  position: absolute;border-bottom:1rpx solid lightgray;">
                </view>
            </view>
            <!--课表主体部分-->
            
            <view wx:for="{{courses}}" wx:key="index" wx:for-item="course">
                <block wx:if="{{curr_week>=week_bg && curr_week<=week_end }}">
                    <view wx:for="{{courses.day}}" wx:key="index" wx:for-index="i" wx:for-item="day"></view>
                    <view class="flex-item kcb-item" bindtap="showCsInfo" style="margin-left:{{(day-1)*98}}rpx;
                    margin-top:{{(course.day[0]-1)*50+2}}px;
                    height:{{course.day.length*50-5}}px;
                    background-color:{{course.type == '0'?'#FCB8AF':(course.type == '1'?'#81D2FC':'#F8C77A')}}">
                        <view class="smalltext" style='-webkit-line-clamp: {{course.day.length == 3?"4":(course.day.length == 4?"6":"2")}}'>
                            {{course.cs_name}}
                        </view>
                        <view class='classRoom'>
                            ({{course.classroom == ''?'--':course.classroom}})
                        </view>
                        <view class='logo' style="background-color:{{course.type == " 0"?'#FA7666':(course.type=="1" ?'#3CB9FB':'#F39C13')}}">
                            {{course.type == "0"?'必':(course.type == "1"?'选':'其')}}
                        </view>
                        <!-- day代表星期几上课，sksj是上课时间，skcd上课长度，cs_name课程名，jsbh教室编号 -->
                </block>
            </view>
        </view>
</view>
</scroll-view>
</view>